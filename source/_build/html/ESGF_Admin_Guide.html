

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ESGF/CoG Administrator Guide Overview &mdash; ESGF CoG 0.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/esgf_globe.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="contents.html" class="icon icon-home"> ESGF CoG
          

          
            
            <img src="_static/esgf_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">ESGF/CoG Administrator Guide Overview</a><ul>
<li><a class="reference internal" href="#step-1b-upgrade-cog-standalone">Step 1b: Upgrade CoG standalone</a></li>
<li><a class="reference internal" href="#step-2-configure-cog">Step 2: Configure CoG</a></li>
<li><a class="reference internal" href="#step-3-upgrade-cog">Step 3: Upgrade CoG</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="contents.html">ESGF CoG</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="contents.html">Docs</a> &raquo;</li>
        
      <li>ESGF/CoG Administrator Guide Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/ESGF_Admin_Guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="esgf-cog-administrator-guide-overview">
<h1>ESGF/CoG Administrator Guide Overview<a class="headerlink" href="#esgf-cog-administrator-guide-overview" title="Permalink to this headline">¶</a></h1>
<p>The Earth System CoG Collaboration Environment has replaced the Web
Front End as the public face to ESGF. This page describes the steps
necessary to setup, configure, and maintain CoG for your ESGF node. It
is intended to be used by existing ESGF Node administrators with
root-level access.</p>
<p>Step 1a: Install CoG using the ESGF installer CoG is installed as part
of a standard ESGF Index Node by running the ESGF installer. Currently,
CoG is configured to run behind the Apache httpd server on the standard
port SSL port 443 (redirection from port 80 will be configured soon).
After the ESGF installer completes succesfully, check that you can
access the node by typing the following URL in your favorite browser</p>
<p>Open URL: <a class="reference external" href="https:///">https:///</a> Replace: with your Node’s fully qualified domain
name (note the “https” protocol).</p>
<p>This should redirect to <a class="reference external" href="https:////projects/testproject/">https:////projects/testproject/</a></p>
<div class="section" id="step-1b-upgrade-cog-standalone">
<h2>Step 1b: Upgrade CoG standalone<a class="headerlink" href="#step-1b-upgrade-cog-standalone" title="Permalink to this headline">¶</a></h2>
<p>Alternatively, if you already have a working ESGF/CoG setup, you can
upgrade CoG without running the full ESGF installer with the following
procedure (as root, or prepend commands with sudo):</p>
<div class="code ipython2 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Stop</span> <span class="n">the</span> <span class="n">ESGF</span> <span class="n">node</span><span class="p">:</span> <span class="c1"># /usr/local/bin/esg-node stop</span>
<span class="n">But</span> <span class="n">start</span> <span class="n">Postgres</span><span class="p">:</span> <span class="c1"># /etc/init.d/postgresql start</span>
<span class="n">Checkout</span> <span class="n">the</span> <span class="n">latest</span> <span class="n">esg</span><span class="o">-</span><span class="n">cog</span> <span class="n">script</span> <span class="kn">from</span> <span class="nn">GitHub</span> <span class="p">(</span><span class="n">devel</span> <span class="n">branch</span><span class="p">):</span>
<span class="c1"># cd /usr/local/bin</span>
<span class="c1"># wget &#39;https://github.com/ESGF/esgf-installer/blob/devel/cog/esg-cog&#39;</span>
<span class="n">Execute</span> <span class="n">the</span> <span class="n">script</span><span class="p">:</span> <span class="c1"># ./esg-cog</span>
<span class="n">Stop</span> <span class="n">Postgres</span><span class="p">:</span> <span class="c1"># /etc/init.d/postgresql stop</span>
<span class="n">Restart</span> <span class="n">the</span> <span class="n">ESGF</span> <span class="n">node</span><span class="p">:</span> <span class="c1"># /usr/local/bin/esg-node start</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">File</span> <span class="s2">&quot;&lt;ipython-input-2-a0fcba534f74&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="n">Stop</span> <span class="n">the</span> <span class="n">ESGF</span> <span class="n">node</span><span class="p">:</span> <span class="c1"># /usr/local/bin/esg-node stop</span>
           <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
</pre></div>
</div>
</div>
<div class="section" id="step-2-configure-cog">
<h2>Step 2: Configure CoG<a class="headerlink" href="#step-2-configure-cog" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Once ESGF-COG is installed, the ESGF Node administrator must complete
a sequence of one-time tasks to configure and customize the node.</li>
<li>These tasks can be completed at different times to progressively
enhance the node functionality.</li>
<li>Please note that any configuration and content will be persisted
across sub-sequent upgrades of the ESGF Node, but will be completely
wiped out if the ESGF Node is re-installed from scratch (since CoG
content is kept in the Postgres database, which will be erased by a
total ESGF Node re-install). So, if you plan on later re-installing
the whole Node from scratch, it is recommended to only follow steps
1-3 below to execute some basic post-installation testing. Proceed
with the additional steps only when you believe that your Node
installation is final, about to go into production, and you will only
have to upgrade the Node, not re-install it.</li>
</ul>
<div class="code ipython2 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Login</span> <span class="k">as</span> <span class="n">ESGF</span><span class="o">/</span><span class="n">CoG</span> <span class="n">Administrator</span>
<span class="mf">2.</span> <span class="n">Setup</span> <span class="n">the</span> <span class="n">Node</span> <span class="n">Home</span> <span class="n">Project</span>
<span class="mf">3.</span> <span class="n">Configure</span> <span class="n">the</span> <span class="n">Home</span> <span class="n">Project</span> <span class="n">Search</span>
<span class="mf">4.</span> <span class="n">Data</span> <span class="n">Access</span> <span class="n">Control</span> <span class="n">Setup</span>
<span class="mf">5.</span> <span class="n">Customize</span> <span class="n">the</span> <span class="n">Node</span> <span class="n">Header</span> <span class="ow">and</span> <span class="n">Footer</span>
<span class="mf">6.</span> <span class="n">Customize</span> <span class="n">Google</span> <span class="n">Analytics</span>
<span class="mf">7.</span> <span class="n">Setup</span> <span class="n">the</span> <span class="n">ESGF</span> <span class="n">Node</span> <span class="n">Federation</span>
<span class="mf">8.</span> <span class="n">Configure</span> <span class="n">Globus</span> <span class="n">Downloads</span>
<span class="mi">9</span><span class="p">,</span> <span class="n">Setup</span> <span class="n">Cron</span> <span class="n">Jobs</span>
<span class="mf">10.</span> <span class="n">Local</span> <span class="n">Shard</span> <span class="n">Setup</span> <span class="ow">and</span> <span class="n">Publishing</span>
</pre></div>
</div>
<p>Additionally, the following pages contain additional content related to
understanding and operating an ESGF-CoG node:</p>
<ul class="simple">
<li>CoG-to-ESGF User Accounts</li>
<li>Restore from backup</li>
</ul>
</div>
<div class="section" id="step-3-upgrade-cog">
<h2>Step 3: Upgrade CoG<a class="headerlink" href="#step-3-upgrade-cog" title="Permalink to this headline">¶</a></h2>
<p>In general, CoG upgrades are best executed within a complete ESGF
release, by runinnig the full ESGF installer. But there might be
situations where an ESGF Node administrator might want to install a new
CoG version right away - for example, because a security patch or a new
piece of functionality must be installed as soon as possible. CoG can be
upgraded standalone by leveraging the ESGF installation infrastructure,
simply by editing and executing the esg-cog script (as root):</p>
<div class="code ipython2 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span>
<span class="n">edit</span> <span class="n">esg</span><span class="o">-</span><span class="n">cog</span><span class="p">:</span> <span class="nb">set</span> <span class="n">VERSION</span><span class="o">=...</span><span class="n">whatever</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">CoG</span> <span class="n">version</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">install</span><span class="o">...</span>
<span class="n">execute</span> <span class="n">esg</span><span class="o">-</span><span class="n">cog</span><span class="p">:</span> <span class="o">./</span><span class="n">esg</span><span class="o">-</span><span class="n">cog</span>
<span class="n">restart</span> <span class="n">the</span> <span class="n">node</span><span class="p">:</span> <span class="o">./</span><span class="n">esg</span><span class="o">-</span><span class="n">node</span> <span class="n">restart</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">File</span> <span class="s2">&quot;&lt;ipython-input-4-25478b30a7e9&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">2</span>
    <span class="n">edit</span> <span class="n">esg</span><span class="o">-</span><span class="n">cog</span><span class="p">:</span> <span class="nb">set</span> <span class="n">VERSION</span><span class="o">=...</span><span class="n">whatever</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">CoG</span> <span class="n">version</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">install</span><span class="o">...</span>
           <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
</pre></div>
</div>
<p>IMPORTANT: please note that the esg-cog script requires that the ESGF
Postgres database be running while it executes. So either leave the
whole ESGF node running, upgrade CoG, and then restart the node; or shut
down the node but start up the Postgres database alone before running
the upgrade script.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ESGF User Interface Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>